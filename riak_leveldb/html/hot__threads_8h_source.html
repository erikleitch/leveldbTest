<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>My Project: util/hot_threads.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_23ec12649285f9fabf3a6b7380226c28.html">util</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">hot_threads.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="hot__threads_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// -------------------------------------------------------------------</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// hot_threads.h</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// Copyright (c) 2011-2013 Basho Technologies, Inc. All Rights Reserved.</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// This file is provided to you under the Apache License,</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// Version 2.0 (the &quot;License&quot;); you may not use this file</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// except in compliance with the License.  You may obtain</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// a copy of the License at</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//   http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// Unless required by applicable law or agreed to in writing,</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// software distributed under the License is distributed on an</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">// &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// KIND, either express or implied.  See the License for the</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// specific language governing permissions and limitations</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// under the License.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">// -------------------------------------------------------------------</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">// -------------------------------------------------------------------</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// HotThread is a subtle variation on the eleveldb_thread_pool.  Both</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//  represent a design pattern that is tested to perform better under</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">//  the Erlang VM than other traditional designs.</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">// -------------------------------------------------------------------</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#ifndef STORAGE_LEVELDB_INCLUDE_HOT_THREADS_H_</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#define STORAGE_LEVELDB_INCLUDE_HOT_THREADS_H_</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;pthread.h&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;semaphore.h&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;deque&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="perf__count_8h.html">leveldb/perf_count.h</a>&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="port_8h.html">port/port.h</a>&quot;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mutexlock_8h.html">util/mutexlock.h</a>&quot;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespaceleveldb.html">leveldb</a></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">// forward declare</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="keyword">class </span>ThreadTask;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="structleveldb_1_1_hot_thread.html">   50</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structleveldb_1_1_hot_thread.html">HotThread</a></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="structleveldb_1_1_hot_thread.html#a9c05159cb466d0681f8c068fd92b4cb3">   53</a></span>&#160;    pthread_t <a class="code" href="structleveldb_1_1_hot_thread.html#a9c05159cb466d0681f8c068fd92b4cb3">m_ThreadId</a>;                </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="structleveldb_1_1_hot_thread.html#af6a8ce25afa9a8a54ddc453a456cd08e">   55</a></span>&#160;    <span class="keyword">volatile</span> <a class="code" href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> <a class="code" href="structleveldb_1_1_hot_thread.html#af6a8ce25afa9a8a54ddc453a456cd08e">m_Available</a>;       </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="structleveldb_1_1_hot_thread.html#ab42a98dcba66173c32c6b47ec3cabb4e">   56</a></span>&#160;    <span class="keyword">class </span><a class="code" href="classleveldb_1_1_hot_thread_pool.html">HotThreadPool</a> &amp; <a class="code" href="structleveldb_1_1_hot_thread.html#ab42a98dcba66173c32c6b47ec3cabb4e">m_Pool</a>;        </div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="structleveldb_1_1_hot_thread.html#a18e771cb85ee461a0a790ee5a405f1e7">   57</a></span>&#160;    <span class="keyword">volatile</span> <a class="code" href="classleveldb_1_1_thread_task.html">ThreadTask</a> * <a class="code" href="structleveldb_1_1_hot_thread.html#a18e771cb85ee461a0a790ee5a405f1e7">m_DirectWork</a>;    </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="structleveldb_1_1_hot_thread.html#a26f6be5d8a8b888eef2ebae5a382c854">   59</a></span>&#160;    <a class="code" href="classleveldb_1_1port_1_1_mutex.html">port::Mutex</a> <a class="code" href="structleveldb_1_1_hot_thread.html#a26f6be5d8a8b888eef2ebae5a382c854">m_Mutex</a>;             </div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="structleveldb_1_1_hot_thread.html#a125803d2ca640557d1c7a62eb666fb70">   60</a></span>&#160;    <a class="code" href="classleveldb_1_1port_1_1_cond_var.html">port::CondVar</a> <a class="code" href="structleveldb_1_1_hot_thread.html#a125803d2ca640557d1c7a62eb666fb70">m_Condition</a>;          </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="structleveldb_1_1_hot_thread.html#a484540b41eda32cfd16aa42778e0254a">   63</a></span>&#160;    <a class="code" href="structleveldb_1_1_hot_thread.html#a484540b41eda32cfd16aa42778e0254a">HotThread</a>(<span class="keyword">class</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html">HotThreadPool</a> &amp; Pool)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    : m_Available(0), m_Pool(Pool), m_DirectWork(NULL),</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        m_Condition(&amp;m_Mutex)</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    {}   <span class="comment">// HotThread</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="structleveldb_1_1_hot_thread.html#a43bf8c26c255410e21c5c015699e67d9">   68</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="structleveldb_1_1_hot_thread.html#a43bf8c26c255410e21c5c015699e67d9">~HotThread</a>() {};</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="comment">// actual work loop</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordtype">void</span> * <a class="code" href="structleveldb_1_1_hot_thread.html#a7c436b64fe276361ead18ec4242e5001">ThreadRoutine</a>();</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="structleveldb_1_1_hot_thread.html#a0589f0b162df47d7ef7902992a528a62">HotThread</a>();                              <span class="comment">// no default</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="structleveldb_1_1_hot_thread.html#a0589f0b162df47d7ef7902992a528a62">HotThread</a>(<span class="keyword">const</span> <a class="code" href="structleveldb_1_1_hot_thread.html">HotThread</a> &amp;);             <span class="comment">// no copy</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="structleveldb_1_1_hot_thread.html">HotThread</a> &amp; <a class="code" href="structleveldb_1_1_hot_thread.html#aca053c3dd1b986d35fc3e4b2a8316eb6">operator=</a>(<span class="keyword">const</span> <a class="code" href="structleveldb_1_1_hot_thread.html">HotThread</a>&amp;);  <span class="comment">// no assign</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;};  <span class="comment">// class HotThread</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="structleveldb_1_1_queue_thread.html">   81</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structleveldb_1_1_queue_thread.html">QueueThread</a></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="structleveldb_1_1_queue_thread.html#afa80b76fb1ae354d8b1123f7f1c2a171">   84</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="structleveldb_1_1_queue_thread.html#afa80b76fb1ae354d8b1123f7f1c2a171">m_ThreadGood</a>;                   </div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="structleveldb_1_1_queue_thread.html#aea8d3c3f7c5d97e2b72e8500ba02a716">   85</a></span>&#160;    pthread_t <a class="code" href="structleveldb_1_1_queue_thread.html#aea8d3c3f7c5d97e2b72e8500ba02a716">m_ThreadId</a>;                </div>
<div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="structleveldb_1_1_queue_thread.html#ad232678ff8b15ad8be50cb5a0e68fa07">   86</a></span>&#160;    std::string <a class="code" href="structleveldb_1_1_queue_thread.html#ad232678ff8b15ad8be50cb5a0e68fa07">m_QueueName</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="structleveldb_1_1_queue_thread.html#a7e5f6e3e8b24a4698b775dcd9caa9726">   88</a></span>&#160;    <span class="keyword">class </span><a class="code" href="classleveldb_1_1_hot_thread_pool.html">HotThreadPool</a> &amp; <a class="code" href="structleveldb_1_1_queue_thread.html#a7e5f6e3e8b24a4698b775dcd9caa9726">m_Pool</a>;        </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="structleveldb_1_1_queue_thread.html#a697f7c0aaeb5e776cf1de59476ec2005">   90</a></span>&#160;    sem_t <a class="code" href="structleveldb_1_1_queue_thread.html#a697f7c0aaeb5e776cf1de59476ec2005">m_Semaphore</a>;                   </div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="structleveldb_1_1_queue_thread.html#a0dc37975600c8018e85f7d7edfebccd7">   91</a></span>&#160;    sem_t * <a class="code" href="structleveldb_1_1_queue_thread.html#a0dc37975600c8018e85f7d7edfebccd7">m_SemaphorePtr</a>;              </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="structleveldb_1_1_queue_thread.html#ad6ed3ce556274868f55a15b47babbb0a">QueueThread</a>(<span class="keyword">class</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html">HotThreadPool</a> &amp; Pool);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keyword">virtual</span> <a class="code" href="structleveldb_1_1_queue_thread.html#affd97f2c367cb4859d2369bd4e696ebd">~QueueThread</a>();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// actual work loop</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordtype">void</span> * <a class="code" href="structleveldb_1_1_queue_thread.html#a4ff595ae14d6502e080621be96cd30a9">QueueThreadRoutine</a>();</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="structleveldb_1_1_queue_thread.html#ad6ed3ce556274868f55a15b47babbb0a">QueueThread</a>();                              <span class="comment">// no default</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="structleveldb_1_1_queue_thread.html#ad6ed3ce556274868f55a15b47babbb0a">QueueThread</a>(<span class="keyword">const</span> <a class="code" href="structleveldb_1_1_queue_thread.html">QueueThread</a> &amp;);             <span class="comment">// no copy</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="structleveldb_1_1_queue_thread.html">QueueThread</a> &amp; <a class="code" href="structleveldb_1_1_queue_thread.html#a2ad1743316a6f94cd83faafbe2fec466">operator=</a>(<span class="keyword">const</span> <a class="code" href="structleveldb_1_1_queue_thread.html">QueueThread</a>&amp;);  <span class="comment">// no assign</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;};  <span class="comment">// class QueueThread</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html">  109</a></span>&#160;<span class="keyword">class </span><a class="code" href="classleveldb_1_1_hot_thread_pool.html">HotThreadPool</a></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#a03b0d2067849f04918927772f5b44770">  112</a></span>&#160;    std::string <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a03b0d2067849f04918927772f5b44770">m_PoolName</a>;              </div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#a00b8e7f713908bfc81fb312ec78da744">  113</a></span>&#160;    <span class="keyword">typedef</span> std::deque&lt;ThreadTask*&gt; <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a00b8e7f713908bfc81fb312ec78da744">WorkQueue_t</a>;</div>
<div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#a0d8e96c9dc8fc9fc9ec68acd11a6af71">  114</a></span>&#160;    <span class="keyword">typedef</span> std::vector&lt;HotThread *&gt;   <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a0d8e96c9dc8fc9fc9ec68acd11a6af71">ThreadPool_t</a>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#aa0bf6b3ad8b624bc6e41dec5c702f8a8">  116</a></span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">bool</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#aa0bf6b3ad8b624bc6e41dec5c702f8a8">m_Shutdown</a>;            </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#a79c90db2f251666fd715d79c3fe2c107">  118</a></span>&#160;    ThreadPool_t  <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a79c90db2f251666fd715d79c3fe2c107">m_Threads</a>;             </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#a798f6a1fa0e086801bc3a23ad86a4ee1">  120</a></span>&#160;    WorkQueue_t   <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a798f6a1fa0e086801bc3a23ad86a4ee1">m_WorkQueue</a>;</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#a37f97bceb4dc661a524433f6c5459cd1">  121</a></span>&#160;    <a class="code" href="classleveldb_1_1port_1_1_mutex.html">port::Spin</a> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a37f97bceb4dc661a524433f6c5459cd1">m_QueueLock</a>;              </div>
<div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#a3a0aafc7c581ea064fb79c334d918d57">  122</a></span>&#160;    <span class="keyword">volatile</span> <span class="keywordtype">size_t</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a3a0aafc7c581ea064fb79c334d918d57">m_WorkQueueAtomic</a>;   </div>
<div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#a061ea39c8e7d9fcab1a331c4955fc181">  123</a></span>&#160;    <a class="code" href="structleveldb_1_1_queue_thread.html">QueueThread</a> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a061ea39c8e7d9fcab1a331c4955fc181">m_QueueThread</a>;           </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#addcf8d7da65f452d5bb0d2e96facd741">  125</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="namespaceleveldb.html#a0ba185501d4b24cf13090cf641fc637a">PerformanceCountersEnum</a> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#addcf8d7da65f452d5bb0d2e96facd741">m_DirectCounter</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#aac7b6600773035c7499721eb42ab2075">  126</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="namespaceleveldb.html#a0ba185501d4b24cf13090cf641fc637a">PerformanceCountersEnum</a> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#aac7b6600773035c7499721eb42ab2075">m_QueuedCounter</a>;</div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#a7e28dd1d6f7607c7840f4b0604a2d43e">  127</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="namespaceleveldb.html#a0ba185501d4b24cf13090cf641fc637a">PerformanceCountersEnum</a> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a7e28dd1d6f7607c7840f4b0604a2d43e">m_DequeuedCounter</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#a2ecf9d61378505a8f43335bc2017078b">  128</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="namespaceleveldb.html#a0ba185501d4b24cf13090cf641fc637a">PerformanceCountersEnum</a> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a2ecf9d61378505a8f43335bc2017078b">m_WeightedCounter</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a397962912226c11c3f471718193541b0">HotThreadPool</a>(<span class="keyword">const</span> <span class="keywordtype">size_t</span> thread_pool_size, <span class="keyword">const</span> <span class="keywordtype">char</span> * Name,</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                  <span class="keyword">enum</span> <a class="code" href="namespaceleveldb.html#a0ba185501d4b24cf13090cf641fc637a">PerformanceCountersEnum</a> Direct,</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                  <span class="keyword">enum</span> <a class="code" href="namespaceleveldb.html#a0ba185501d4b24cf13090cf641fc637a">PerformanceCountersEnum</a> Queued,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                  <span class="keyword">enum</span> <a class="code" href="namespaceleveldb.html#a0ba185501d4b24cf13090cf641fc637a">PerformanceCountersEnum</a> Dequeued,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                  <span class="keyword">enum</span> <a class="code" href="namespaceleveldb.html#a0ba185501d4b24cf13090cf641fc637a">PerformanceCountersEnum</a> Weighted);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keyword">virtual</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a1f944f8bcfc0036bc87c20978f00f1a1">~HotThreadPool</a>();</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="classleveldb_1_1_hot_thread_pool.html#ad002c307f26506b3ee24fdcce111af4b">ThreadStart</a>(<span class="keywordtype">void</span> *args);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#ae358dc103ea4873fec2ded1eb8b67eb0">FindWaitingThread</a>(<a class="code" href="classleveldb_1_1_thread_task.html">ThreadTask</a> * work, <span class="keywordtype">bool</span> OkToQueue=<span class="keyword">true</span>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a8b7315ca5cfa2bcb8a11139633d17b55">Submit</a>(<a class="code" href="classleveldb_1_1_thread_task.html">ThreadTask</a> * item, <span class="keywordtype">bool</span> OkToQueue=<span class="keyword">true</span>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#acc7d1479b8e81a4105b0653ca82ca95b">  145</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#acc7d1479b8e81a4105b0653ca82ca95b">work_queue_size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_WorkQueue.size();}</div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#aaca48f404522caf977d56264cfc51eb8">  146</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#aaca48f404522caf977d56264cfc51eb8">shutdown_pending</a>()<span class="keyword"> const  </span>{ <span class="keywordflow">return</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#aa0bf6b3ad8b624bc6e41dec5c702f8a8">m_Shutdown</a>; }</div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#a16063894f72b1de6c5c556a1b539022b">  147</a></span>&#160;    <a class="code" href="structleveldb_1_1_performance_counters.html">leveldb::PerformanceCounters</a> * <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a16063894f72b1de6c5c556a1b539022b">perf</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span>(<a class="code" href="namespaceleveldb.html#a8aa95dd97d9167fd8c5a015e19e387b8">leveldb::gPerfCounters</a>);};</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#af197444281b36da96279dacf4657bf6e">  149</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#af197444281b36da96279dacf4657bf6e">IncWorkDirect</a>() {<a class="code" href="namespaceleveldb.html#a8aa95dd97d9167fd8c5a015e19e387b8">leveldb::gPerfCounters</a>-&gt;<a class="code" href="structleveldb_1_1_performance_counters.html#a6c29cd0f57a2b78edc0cdfdfb0869b21">Inc</a>(m_DirectCounter);};</div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#a30ca13128f7acc57db7a098345a98870">  150</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a30ca13128f7acc57db7a098345a98870">IncWorkQueued</a>() {<a class="code" href="namespaceleveldb.html#a8aa95dd97d9167fd8c5a015e19e387b8">leveldb::gPerfCounters</a>-&gt;<a class="code" href="structleveldb_1_1_performance_counters.html#a6c29cd0f57a2b78edc0cdfdfb0869b21">Inc</a>(m_QueuedCounter);};</div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#a04887fa51e30658c5bcae49161ade203">  151</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a04887fa51e30658c5bcae49161ade203">IncWorkDequeued</a>() {<a class="code" href="namespaceleveldb.html#a8aa95dd97d9167fd8c5a015e19e387b8">leveldb::gPerfCounters</a>-&gt;<a class="code" href="structleveldb_1_1_performance_counters.html#a6c29cd0f57a2b78edc0cdfdfb0869b21">Inc</a>(m_DequeuedCounter);};</div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="classleveldb_1_1_hot_thread_pool.html#a329794c6b10f1a95410a8a1f8abb4d50">  152</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a329794c6b10f1a95410a8a1f8abb4d50">IncWorkWeighted</a>(<a class="code" href="stdint_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a> Count) {<a class="code" href="namespaceleveldb.html#a8aa95dd97d9167fd8c5a015e19e387b8">leveldb::gPerfCounters</a>-&gt;<a class="code" href="structleveldb_1_1_performance_counters.html#a8b209c77780935f91c652db6e6db4b5a">Add</a>(m_WeightedCounter, Count);};</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a397962912226c11c3f471718193541b0">HotThreadPool</a>(<span class="keyword">const</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html">HotThreadPool</a> &amp;);             <span class="comment">// nocopy</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="classleveldb_1_1_hot_thread_pool.html">HotThreadPool</a>&amp; <a class="code" href="classleveldb_1_1_hot_thread_pool.html#a9e28c6948e1bc38fac95bee1fb968e87">operator=</a>(<span class="keyword">const</span> <a class="code" href="classleveldb_1_1_hot_thread_pool.html">HotThreadPool</a>&amp;);  <span class="comment">// nocopyassign</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;};  <span class="comment">// class HotThreadPool</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="keyword">extern</span> HotThreadPool * <a class="code" href="namespaceleveldb.html#a1f4ec1a2203290cdf5dc08089e6ab3aa">gImmThreads</a>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="keyword">extern</span> HotThreadPool * <a class="code" href="namespaceleveldb.html#af1ea4d410a9bc7416f346ba434c62e20">gWriteThreads</a>;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="keyword">extern</span> HotThreadPool * <a class="code" href="namespaceleveldb.html#a80755b49a8aa35a9951c865b65c2d77a">gLevel0Threads</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="keyword">extern</span> HotThreadPool * <a class="code" href="namespaceleveldb.html#ae13159afb5d5c5b0554477e51cf992fd">gCompactionThreads</a>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;} <span class="comment">// namespace leveldb</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor">#endif  // STORAGE_LEVELDB_INCLUDE_HOT_THREADS_H_</span></div>
<div class="ttc" id="structleveldb_1_1_performance_counters_html_a6c29cd0f57a2b78edc0cdfdfb0869b21"><div class="ttname"><a href="structleveldb_1_1_performance_counters.html#a6c29cd0f57a2b78edc0cdfdfb0869b21">leveldb::PerformanceCounters::Inc</a></div><div class="ttdeci">uint64_t Inc(unsigned Index)</div><div class="ttdef"><b>Definition:</b> perf_count.cc:343</div></div>
<div class="ttc" id="namespaceleveldb_html_a80755b49a8aa35a9951c865b65c2d77a"><div class="ttname"><a href="namespaceleveldb.html#a80755b49a8aa35a9951c865b65c2d77a">leveldb::gLevel0Threads</a></div><div class="ttdeci">HotThreadPool * gLevel0Threads</div><div class="ttdef"><b>Definition:</b> hot_threads.cc:43</div></div>
<div class="ttc" id="namespaceleveldb_html"><div class="ttname"><a href="namespaceleveldb.html">leveldb</a></div><div class="ttdoc">Copied from basho/eleveldb/c_src/detail.hpp September 8, 2013. </div><div class="ttdef"><b>Definition:</b> builder.cc:18</div></div>
<div class="ttc" id="structleveldb_1_1_queue_thread_html_a4ff595ae14d6502e080621be96cd30a9"><div class="ttname"><a href="structleveldb_1_1_queue_thread.html#a4ff595ae14d6502e080621be96cd30a9">leveldb::QueueThread::QueueThreadRoutine</a></div><div class="ttdeci">void * QueueThreadRoutine()</div><div class="ttdef"><b>Definition:</b> hot_threads.cc:252</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_aac7b6600773035c7499721eb42ab2075"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#aac7b6600773035c7499721eb42ab2075">leveldb::HotThreadPool::m_QueuedCounter</a></div><div class="ttdeci">enum PerformanceCountersEnum m_QueuedCounter</div><div class="ttdef"><b>Definition:</b> hot_threads.h:126</div></div>
<div class="ttc" id="structleveldb_1_1_hot_thread_html_a0589f0b162df47d7ef7902992a528a62"><div class="ttname"><a href="structleveldb_1_1_hot_thread.html#a0589f0b162df47d7ef7902992a528a62">leveldb::HotThread::HotThread</a></div><div class="ttdeci">HotThread()</div></div>
<div class="ttc" id="perf__count_8h_html"><div class="ttname"><a href="perf__count_8h.html">perf_count.h</a></div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_aaca48f404522caf977d56264cfc51eb8"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#aaca48f404522caf977d56264cfc51eb8">leveldb::HotThreadPool::shutdown_pending</a></div><div class="ttdeci">bool shutdown_pending() const </div><div class="ttdef"><b>Definition:</b> hot_threads.h:146</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_ad002c307f26506b3ee24fdcce111af4b"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#ad002c307f26506b3ee24fdcce111af4b">leveldb::HotThreadPool::ThreadStart</a></div><div class="ttdeci">static void * ThreadStart(void *args)</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a30ca13128f7acc57db7a098345a98870"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a30ca13128f7acc57db7a098345a98870">leveldb::HotThreadPool::IncWorkQueued</a></div><div class="ttdeci">void IncWorkQueued()</div><div class="ttdef"><b>Definition:</b> hot_threads.h:150</div></div>
<div class="ttc" id="structleveldb_1_1_queue_thread_html_aea8d3c3f7c5d97e2b72e8500ba02a716"><div class="ttname"><a href="structleveldb_1_1_queue_thread.html#aea8d3c3f7c5d97e2b72e8500ba02a716">leveldb::QueueThread::m_ThreadId</a></div><div class="ttdeci">pthread_t m_ThreadId</div><div class="ttdoc">handle for this thread </div><div class="ttdef"><b>Definition:</b> hot_threads.h:85</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a04887fa51e30658c5bcae49161ade203"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a04887fa51e30658c5bcae49161ade203">leveldb::HotThreadPool::IncWorkDequeued</a></div><div class="ttdeci">void IncWorkDequeued()</div><div class="ttdef"><b>Definition:</b> hot_threads.h:151</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a7e28dd1d6f7607c7840f4b0604a2d43e"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a7e28dd1d6f7607c7840f4b0604a2d43e">leveldb::HotThreadPool::m_DequeuedCounter</a></div><div class="ttdeci">enum PerformanceCountersEnum m_DequeuedCounter</div><div class="ttdef"><b>Definition:</b> hot_threads.h:127</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_af197444281b36da96279dacf4657bf6e"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#af197444281b36da96279dacf4657bf6e">leveldb::HotThreadPool::IncWorkDirect</a></div><div class="ttdeci">void IncWorkDirect()</div><div class="ttdef"><b>Definition:</b> hot_threads.h:149</div></div>
<div class="ttc" id="structleveldb_1_1_hot_thread_html_ab42a98dcba66173c32c6b47ec3cabb4e"><div class="ttname"><a href="structleveldb_1_1_hot_thread.html#ab42a98dcba66173c32c6b47ec3cabb4e">leveldb::HotThread::m_Pool</a></div><div class="ttdeci">class HotThreadPool &amp; m_Pool</div><div class="ttdoc">parent pool object </div><div class="ttdef"><b>Definition:</b> hot_threads.h:56</div></div>
<div class="ttc" id="structleveldb_1_1_performance_counters_html"><div class="ttname"><a href="structleveldb_1_1_performance_counters.html">leveldb::PerformanceCounters</a></div><div class="ttdef"><b>Definition:</b> perf_count.h:240</div></div>
<div class="ttc" id="structleveldb_1_1_hot_thread_html_a18e771cb85ee461a0a790ee5a405f1e7"><div class="ttname"><a href="structleveldb_1_1_hot_thread.html#a18e771cb85ee461a0a790ee5a405f1e7">leveldb::HotThread::m_DirectWork</a></div><div class="ttdeci">volatile ThreadTask * m_DirectWork</div><div class="ttdoc">work passed direct to thread </div><div class="ttdef"><b>Definition:</b> hot_threads.h:57</div></div>
<div class="ttc" id="structleveldb_1_1_queue_thread_html_afa80b76fb1ae354d8b1123f7f1c2a171"><div class="ttname"><a href="structleveldb_1_1_queue_thread.html#afa80b76fb1ae354d8b1123f7f1c2a171">leveldb::QueueThread::m_ThreadGood</a></div><div class="ttdeci">bool m_ThreadGood</div><div class="ttdoc">true if thread and semaphore good </div><div class="ttdef"><b>Definition:</b> hot_threads.h:84</div></div>
<div class="ttc" id="stdint_8h_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="stdint_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition:</b> stdint.h:21</div></div>
<div class="ttc" id="stdint_8h_html_aaa5d1cd013383c889537491c3cfd9aad"><div class="ttname"><a href="stdint_8h.html#aaa5d1cd013383c889537491c3cfd9aad">uint64_t</a></div><div class="ttdeci">unsigned long long uint64_t</div><div class="ttdef"><b>Definition:</b> stdint.h:22</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a9e28c6948e1bc38fac95bee1fb968e87"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a9e28c6948e1bc38fac95bee1fb968e87">leveldb::HotThreadPool::operator=</a></div><div class="ttdeci">HotThreadPool &amp; operator=(const HotThreadPool &amp;)</div></div>
<div class="ttc" id="structleveldb_1_1_hot_thread_html"><div class="ttname"><a href="structleveldb_1_1_hot_thread.html">leveldb::HotThread</a></div><div class="ttdef"><b>Definition:</b> hot_threads.h:50</div></div>
<div class="ttc" id="classleveldb_1_1_thread_task_html"><div class="ttname"><a href="classleveldb_1_1_thread_task.html">leveldb::ThreadTask</a></div><div class="ttdef"><b>Definition:</b> thread_tasks.h:43</div></div>
<div class="ttc" id="namespaceleveldb_html_af1ea4d410a9bc7416f346ba434c62e20"><div class="ttname"><a href="namespaceleveldb.html#af1ea4d410a9bc7416f346ba434c62e20">leveldb::gWriteThreads</a></div><div class="ttdeci">HotThreadPool * gWriteThreads</div><div class="ttdef"><b>Definition:</b> hot_threads.cc:42</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a397962912226c11c3f471718193541b0"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a397962912226c11c3f471718193541b0">leveldb::HotThreadPool::HotThreadPool</a></div><div class="ttdeci">HotThreadPool(const size_t thread_pool_size, const char *Name, enum PerformanceCountersEnum Direct, enum PerformanceCountersEnum Queued, enum PerformanceCountersEnum Dequeued, enum PerformanceCountersEnum Weighted)</div><div class="ttdef"><b>Definition:</b> hot_threads.cc:302</div></div>
<div class="ttc" id="structleveldb_1_1_hot_thread_html_a43bf8c26c255410e21c5c015699e67d9"><div class="ttname"><a href="structleveldb_1_1_hot_thread.html#a43bf8c26c255410e21c5c015699e67d9">leveldb::HotThread::~HotThread</a></div><div class="ttdeci">virtual ~HotThread()</div><div class="ttdef"><b>Definition:</b> hot_threads.h:68</div></div>
<div class="ttc" id="namespaceleveldb_html_a8aa95dd97d9167fd8c5a015e19e387b8"><div class="ttname"><a href="namespaceleveldb.html#a8aa95dd97d9167fd8c5a015e19e387b8">leveldb::gPerfCounters</a></div><div class="ttdeci">struct PerformanceCounters * gPerfCounters</div><div class="ttdef"><b>Definition:</b> perf_count.h:295</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a798f6a1fa0e086801bc3a23ad86a4ee1"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a798f6a1fa0e086801bc3a23ad86a4ee1">leveldb::HotThreadPool::m_WorkQueue</a></div><div class="ttdeci">WorkQueue_t m_WorkQueue</div><div class="ttdef"><b>Definition:</b> hot_threads.h:120</div></div>
<div class="ttc" id="structleveldb_1_1_queue_thread_html_a7e5f6e3e8b24a4698b775dcd9caa9726"><div class="ttname"><a href="structleveldb_1_1_queue_thread.html#a7e5f6e3e8b24a4698b775dcd9caa9726">leveldb::QueueThread::m_Pool</a></div><div class="ttdeci">class HotThreadPool &amp; m_Pool</div><div class="ttdoc">parent pool object </div><div class="ttdef"><b>Definition:</b> hot_threads.h:88</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a00b8e7f713908bfc81fb312ec78da744"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a00b8e7f713908bfc81fb312ec78da744">leveldb::HotThreadPool::WorkQueue_t</a></div><div class="ttdeci">std::deque&lt; ThreadTask * &gt; WorkQueue_t</div><div class="ttdef"><b>Definition:</b> hot_threads.h:113</div></div>
<div class="ttc" id="structleveldb_1_1_hot_thread_html_a26f6be5d8a8b888eef2ebae5a382c854"><div class="ttname"><a href="structleveldb_1_1_hot_thread.html#a26f6be5d8a8b888eef2ebae5a382c854">leveldb::HotThread::m_Mutex</a></div><div class="ttdeci">port::Mutex m_Mutex</div><div class="ttdoc">mutex for condition variable </div><div class="ttdef"><b>Definition:</b> hot_threads.h:59</div></div>
<div class="ttc" id="structleveldb_1_1_queue_thread_html"><div class="ttname"><a href="structleveldb_1_1_queue_thread.html">leveldb::QueueThread</a></div><div class="ttdef"><b>Definition:</b> hot_threads.h:81</div></div>
<div class="ttc" id="structleveldb_1_1_hot_thread_html_a7c436b64fe276361ead18ec4242e5001"><div class="ttname"><a href="structleveldb_1_1_hot_thread.html#a7c436b64fe276361ead18ec4242e5001">leveldb::HotThread::ThreadRoutine</a></div><div class="ttdeci">void * ThreadRoutine()</div><div class="ttdef"><b>Definition:</b> hot_threads.cc:64</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a37f97bceb4dc661a524433f6c5459cd1"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a37f97bceb4dc661a524433f6c5459cd1">leveldb::HotThreadPool::m_QueueLock</a></div><div class="ttdeci">port::Spin m_QueueLock</div><div class="ttdoc">protects access to work_queue </div><div class="ttdef"><b>Definition:</b> hot_threads.h:121</div></div>
<div class="ttc" id="structleveldb_1_1_hot_thread_html_a484540b41eda32cfd16aa42778e0254a"><div class="ttname"><a href="structleveldb_1_1_hot_thread.html#a484540b41eda32cfd16aa42778e0254a">leveldb::HotThread::HotThread</a></div><div class="ttdeci">HotThread(class HotThreadPool &amp;Pool)</div><div class="ttdef"><b>Definition:</b> hot_threads.h:63</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_aa0bf6b3ad8b624bc6e41dec5c702f8a8"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#aa0bf6b3ad8b624bc6e41dec5c702f8a8">leveldb::HotThreadPool::m_Shutdown</a></div><div class="ttdeci">volatile bool m_Shutdown</div><div class="ttdoc">should we stop threads and shut down? </div><div class="ttdef"><b>Definition:</b> hot_threads.h:116</div></div>
<div class="ttc" id="classleveldb_1_1port_1_1_cond_var_html"><div class="ttname"><a href="classleveldb_1_1port_1_1_cond_var.html">leveldb::port::CondVar</a></div><div class="ttdef"><b>Definition:</b> port_android.h:65</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_addcf8d7da65f452d5bb0d2e96facd741"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#addcf8d7da65f452d5bb0d2e96facd741">leveldb::HotThreadPool::m_DirectCounter</a></div><div class="ttdeci">enum PerformanceCountersEnum m_DirectCounter</div><div class="ttdef"><b>Definition:</b> hot_threads.h:125</div></div>
<div class="ttc" id="structleveldb_1_1_performance_counters_html_a8b209c77780935f91c652db6e6db4b5a"><div class="ttname"><a href="structleveldb_1_1_performance_counters.html#a8b209c77780935f91c652db6e6db4b5a">leveldb::PerformanceCounters::Add</a></div><div class="ttdeci">uint64_t Add(unsigned Index, uint64_t Amount)</div><div class="ttdef"><b>Definition:</b> perf_count.cc:419</div></div>
<div class="ttc" id="structleveldb_1_1_hot_thread_html_aca053c3dd1b986d35fc3e4b2a8316eb6"><div class="ttname"><a href="structleveldb_1_1_hot_thread.html#aca053c3dd1b986d35fc3e4b2a8316eb6">leveldb::HotThread::operator=</a></div><div class="ttdeci">HotThread &amp; operator=(const HotThread &amp;)</div></div>
<div class="ttc" id="structleveldb_1_1_queue_thread_html_a0dc37975600c8018e85f7d7edfebccd7"><div class="ttname"><a href="structleveldb_1_1_queue_thread.html#a0dc37975600c8018e85f7d7edfebccd7">leveldb::QueueThread::m_SemaphorePtr</a></div><div class="ttdeci">sem_t * m_SemaphorePtr</div><div class="ttdoc">either &m_Semaphore or sem_open return value </div><div class="ttdef"><b>Definition:</b> hot_threads.h:91</div></div>
<div class="ttc" id="structleveldb_1_1_hot_thread_html_a125803d2ca640557d1c7a62eb666fb70"><div class="ttname"><a href="structleveldb_1_1_hot_thread.html#a125803d2ca640557d1c7a62eb666fb70">leveldb::HotThread::m_Condition</a></div><div class="ttdeci">port::CondVar m_Condition</div><div class="ttdoc">condition for thread waiting </div><div class="ttdef"><b>Definition:</b> hot_threads.h:60</div></div>
<div class="ttc" id="port_8h_html"><div class="ttname"><a href="port_8h.html">port.h</a></div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_ae358dc103ea4873fec2ded1eb8b67eb0"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#ae358dc103ea4873fec2ded1eb8b67eb0">leveldb::HotThreadPool::FindWaitingThread</a></div><div class="ttdeci">bool FindWaitingThread(ThreadTask *work, bool OkToQueue=true)</div><div class="ttdef"><b>Definition:</b> hot_threads.cc:369</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_acc7d1479b8e81a4105b0653ca82ca95b"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#acc7d1479b8e81a4105b0653ca82ca95b">leveldb::HotThreadPool::work_queue_size</a></div><div class="ttdeci">size_t work_queue_size() const </div><div class="ttdef"><b>Definition:</b> hot_threads.h:145</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a03b0d2067849f04918927772f5b44770"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a03b0d2067849f04918927772f5b44770">leveldb::HotThreadPool::m_PoolName</a></div><div class="ttdeci">std::string m_PoolName</div><div class="ttdoc">used to name threads for gdb / core </div><div class="ttdef"><b>Definition:</b> hot_threads.h:112</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a8b7315ca5cfa2bcb8a11139633d17b55"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a8b7315ca5cfa2bcb8a11139633d17b55">leveldb::HotThreadPool::Submit</a></div><div class="ttdeci">bool Submit(ThreadTask *item, bool OkToQueue=true)</div><div class="ttdef"><b>Definition:</b> hot_threads.cc:423</div></div>
<div class="ttc" id="namespaceleveldb_html_a1f4ec1a2203290cdf5dc08089e6ab3aa"><div class="ttname"><a href="namespaceleveldb.html#a1f4ec1a2203290cdf5dc08089e6ab3aa">leveldb::gImmThreads</a></div><div class="ttdeci">HotThreadPool * gImmThreads</div><div class="ttdef"><b>Definition:</b> hot_threads.cc:41</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a79c90db2f251666fd715d79c3fe2c107"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a79c90db2f251666fd715d79c3fe2c107">leveldb::HotThreadPool::m_Threads</a></div><div class="ttdeci">ThreadPool_t m_Threads</div><div class="ttdoc">pool of fast response workers </div><div class="ttdef"><b>Definition:</b> hot_threads.h:118</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html">leveldb::HotThreadPool</a></div><div class="ttdef"><b>Definition:</b> hot_threads.h:109</div></div>
<div class="ttc" id="structleveldb_1_1_queue_thread_html_affd97f2c367cb4859d2369bd4e696ebd"><div class="ttname"><a href="structleveldb_1_1_queue_thread.html#affd97f2c367cb4859d2369bd4e696ebd">leveldb::QueueThread::~QueueThread</a></div><div class="ttdeci">virtual ~QueueThread()</div><div class="ttdef"><b>Definition:</b> hot_threads.cc:223</div></div>
<div class="ttc" id="classleveldb_1_1port_1_1_mutex_html"><div class="ttname"><a href="classleveldb_1_1port_1_1_mutex.html">leveldb::port::Mutex</a></div><div class="ttdef"><b>Definition:</b> port_android.h:45</div></div>
<div class="ttc" id="structleveldb_1_1_queue_thread_html_a697f7c0aaeb5e776cf1de59476ec2005"><div class="ttname"><a href="structleveldb_1_1_queue_thread.html#a697f7c0aaeb5e776cf1de59476ec2005">leveldb::QueueThread::m_Semaphore</a></div><div class="ttdeci">sem_t m_Semaphore</div><div class="ttdoc">counts items inserted to queue </div><div class="ttdef"><b>Definition:</b> hot_threads.h:90</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a2ecf9d61378505a8f43335bc2017078b"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a2ecf9d61378505a8f43335bc2017078b">leveldb::HotThreadPool::m_WeightedCounter</a></div><div class="ttdeci">enum PerformanceCountersEnum m_WeightedCounter</div><div class="ttdef"><b>Definition:</b> hot_threads.h:128</div></div>
<div class="ttc" id="structleveldb_1_1_hot_thread_html_af6a8ce25afa9a8a54ddc453a456cd08e"><div class="ttname"><a href="structleveldb_1_1_hot_thread.html#af6a8ce25afa9a8a54ddc453a456cd08e">leveldb::HotThread::m_Available</a></div><div class="ttdeci">volatile uint32_t m_Available</div><div class="ttdoc">1 if thread waiting, using standard type for atomic operation </div><div class="ttdef"><b>Definition:</b> hot_threads.h:55</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a0d8e96c9dc8fc9fc9ec68acd11a6af71"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a0d8e96c9dc8fc9fc9ec68acd11a6af71">leveldb::HotThreadPool::ThreadPool_t</a></div><div class="ttdeci">std::vector&lt; HotThread * &gt; ThreadPool_t</div><div class="ttdef"><b>Definition:</b> hot_threads.h:114</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a3a0aafc7c581ea064fb79c334d918d57"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a3a0aafc7c581ea064fb79c334d918d57">leveldb::HotThreadPool::m_WorkQueueAtomic</a></div><div class="ttdeci">volatile size_t m_WorkQueueAtomic</div><div class="ttdoc">atomic size to parallel work_queue.size(). </div><div class="ttdef"><b>Definition:</b> hot_threads.h:122</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a16063894f72b1de6c5c556a1b539022b"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a16063894f72b1de6c5c556a1b539022b">leveldb::HotThreadPool::perf</a></div><div class="ttdeci">leveldb::PerformanceCounters * perf() const </div><div class="ttdef"><b>Definition:</b> hot_threads.h:147</div></div>
<div class="ttc" id="structleveldb_1_1_queue_thread_html_a2ad1743316a6f94cd83faafbe2fec466"><div class="ttname"><a href="structleveldb_1_1_queue_thread.html#a2ad1743316a6f94cd83faafbe2fec466">leveldb::QueueThread::operator=</a></div><div class="ttdeci">QueueThread &amp; operator=(const QueueThread &amp;)</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a329794c6b10f1a95410a8a1f8abb4d50"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a329794c6b10f1a95410a8a1f8abb4d50">leveldb::HotThreadPool::IncWorkWeighted</a></div><div class="ttdeci">void IncWorkWeighted(uint64_t Count)</div><div class="ttdef"><b>Definition:</b> hot_threads.h:152</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a1f944f8bcfc0036bc87c20978f00f1a1"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a1f944f8bcfc0036bc87c20978f00f1a1">leveldb::HotThreadPool::~HotThreadPool</a></div><div class="ttdeci">virtual ~HotThreadPool()</div><div class="ttdef"><b>Definition:</b> hot_threads.cc:338</div></div>
<div class="ttc" id="namespaceleveldb_html_ae13159afb5d5c5b0554477e51cf992fd"><div class="ttname"><a href="namespaceleveldb.html#ae13159afb5d5c5b0554477e51cf992fd">leveldb::gCompactionThreads</a></div><div class="ttdeci">HotThreadPool * gCompactionThreads</div><div class="ttdef"><b>Definition:</b> hot_threads.cc:44</div></div>
<div class="ttc" id="classleveldb_1_1_hot_thread_pool_html_a061ea39c8e7d9fcab1a331c4955fc181"><div class="ttname"><a href="classleveldb_1_1_hot_thread_pool.html#a061ea39c8e7d9fcab1a331c4955fc181">leveldb::HotThreadPool::m_QueueThread</a></div><div class="ttdeci">QueueThread m_QueueThread</div><div class="ttdoc">one slow response worker to cover edge case </div><div class="ttdef"><b>Definition:</b> hot_threads.h:123</div></div>
<div class="ttc" id="mutexlock_8h_html"><div class="ttname"><a href="mutexlock_8h.html">mutexlock.h</a></div></div>
<div class="ttc" id="namespaceleveldb_html_a0ba185501d4b24cf13090cf641fc637a"><div class="ttname"><a href="namespaceleveldb.html#a0ba185501d4b24cf13090cf641fc637a">leveldb::PerformanceCountersEnum</a></div><div class="ttdeci">PerformanceCountersEnum</div><div class="ttdef"><b>Definition:</b> perf_count.h:104</div></div>
<div class="ttc" id="structleveldb_1_1_queue_thread_html_ad232678ff8b15ad8be50cb5a0e68fa07"><div class="ttname"><a href="structleveldb_1_1_queue_thread.html#ad232678ff8b15ad8be50cb5a0e68fa07">leveldb::QueueThread::m_QueueName</a></div><div class="ttdeci">std::string m_QueueName</div><div class="ttdef"><b>Definition:</b> hot_threads.h:86</div></div>
<div class="ttc" id="structleveldb_1_1_hot_thread_html_a9c05159cb466d0681f8c068fd92b4cb3"><div class="ttname"><a href="structleveldb_1_1_hot_thread.html#a9c05159cb466d0681f8c068fd92b4cb3">leveldb::HotThread::m_ThreadId</a></div><div class="ttdeci">pthread_t m_ThreadId</div><div class="ttdoc">handle for this thread </div><div class="ttdef"><b>Definition:</b> hot_threads.h:53</div></div>
<div class="ttc" id="structleveldb_1_1_queue_thread_html_ad6ed3ce556274868f55a15b47babbb0a"><div class="ttname"><a href="structleveldb_1_1_queue_thread.html#ad6ed3ce556274868f55a15b47babbb0a">leveldb::QueueThread::QueueThread</a></div><div class="ttdeci">QueueThread()</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri May 29 2015 16:59:31 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
